syntax = "proto3";

package user;

option go_package = "aycom/backend/proto/user";

service UserService {

  rpc GetUser(GetUserRequest) returns (GetUserResponse) {}

  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse) {}

  rpc UpdateUser(UpdateUserRequest) returns (UpdateUserResponse) {}

  rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse) {}

  rpc UpdateUserVerificationStatus(UpdateUserVerificationStatusRequest) returns (UpdateUserVerificationStatusResponse) {}

  rpc LoginUser(LoginUserRequest) returns (LoginUserResponse) {}

  rpc GetUserByEmail(GetUserByEmailRequest) returns (GetUserByEmailResponse) {}

  rpc GetUserByUsername(GetUserByUsernameRequest) returns (GetUserByUsernameResponse) {}

  rpc IsUserBlocked(IsUserBlockedRequest) returns (IsUserBlockedResponse) {}

  rpc BlockUser(BlockUserRequest) returns (BlockUserResponse) {}

  rpc UnblockUser(UnblockUserRequest) returns (UnblockUserResponse) {}

  rpc ReportUser(ReportUserRequest) returns (ReportUserResponse) {}

  rpc IsFollowing(IsFollowingRequest) returns (IsFollowingResponse) {}

  rpc FollowUser(FollowUserRequest) returns (FollowUserResponse) {}

  rpc UnfollowUser(UnfollowUserRequest) returns (UnfollowUserResponse) {}

  rpc GetFollowers(GetFollowersRequest) returns (GetFollowersResponse) {}

  rpc GetFollowing(GetFollowingRequest) returns (GetFollowingResponse) {}

  rpc SearchUsers(SearchUsersRequest) returns (SearchUsersResponse) {}

  rpc GetRecommendedUsers(GetRecommendedUsersRequest) returns (GetRecommendedUsersResponse) {}

  rpc GetAllUsers(GetAllUsersRequest) returns (GetAllUsersResponse) {}

  rpc RequestPasswordReset(RequestPasswordResetRequest) returns (RequestPasswordResetResponse) {}

  rpc VerifyResetToken(VerifyResetTokenRequest) returns (VerifyResetTokenResponse) {}

  rpc ResetPassword(ResetPasswordRequest) returns (ResetPasswordResponse) {}

  rpc VerifySecurityAnswer(VerifySecurityAnswerRequest) returns (VerifySecurityAnswerResponse) {}

  rpc BanUser(BanUserRequest) returns (BanUserResponse) {}

  rpc SendNewsletter(SendNewsletterRequest) returns (SendNewsletterResponse) {}

  rpc GetCommunityRequests(GetCommunityRequestsRequest) returns (GetCommunityRequestsResponse) {}

  rpc ProcessCommunityRequest(ProcessCommunityRequestRequest) returns (ProcessCommunityRequestResponse) {}

  rpc CreateCommunityRequest(CreateCommunityRequestRequest) returns (CreateCommunityRequestResponse) {}

  rpc GetPremiumRequests(GetPremiumRequestsRequest) returns (GetPremiumRequestsResponse) {}

  rpc ProcessPremiumRequest(ProcessPremiumRequestRequest) returns (ProcessPremiumRequestResponse) {}

  rpc GetReportRequests(GetReportRequestsRequest) returns (GetReportRequestsResponse) {}

  rpc ProcessReportRequest(ProcessReportRequestRequest) returns (ProcessReportRequestResponse) {}

  rpc GetThreadCategories(GetThreadCategoriesRequest) returns (GetThreadCategoriesResponse) {}

  rpc CreateThreadCategory(CreateThreadCategoryRequest) returns (CreateThreadCategoryResponse) {}

  rpc UpdateThreadCategory(UpdateThreadCategoryRequest) returns (UpdateThreadCategoryResponse) {}

  rpc DeleteThreadCategory(DeleteThreadCategoryRequest) returns (DeleteThreadCategoryResponse) {}

  rpc GetCommunityCategories(GetCommunityCategoriesRequest) returns (GetCommunityCategoriesResponse) {}

  rpc CreateCommunityCategory(CreateCommunityCategoryRequest) returns (CreateCommunityCategoryResponse) {}

  rpc UpdateCommunityCategory(UpdateCommunityCategoryRequest) returns (UpdateCommunityCategoryResponse) {}

  rpc DeleteCommunityCategory(DeleteCommunityCategoryRequest) returns (DeleteCommunityCategoryResponse) {}
}

message User {
  string id = 1;
  string name = 2;
  string username = 3;
  string email = 4;
  string gender = 5;
  string date_of_birth = 6;
  string bio = 7;
  string location = 8;
  string website = 9;
  string profile_picture_url = 10;
  string banner_url = 11;
  string created_at = 12;
  string updated_at = 13;

  string password = 14; 
  string security_question = 15;
  string security_answer = 16;
  bool subscribe_to_newsletter = 17;
  bool is_verified = 18;
  int32 follower_count = 19;
  int32 following_count = 20;
  bool is_following = 21; 
  bool is_admin = 22; 
  bool is_banned = 23; 
}

message GetUserRequest {
  string user_id = 1;
}

message GetUserResponse {
  User user = 1;
}

message CreateUserRequest {
  User user = 1;
}

message CreateUserResponse {
  User user = 1;
}

message UpdateUserRequest {
  User user = 1;
  string user_id = 2;
  string name = 3;
  string email = 4;
  string profile_picture_url = 5;
  string banner_url = 6;
}

message UpdateUserResponse {
  User user = 1;
}

message DeleteUserRequest {
  string user_id = 1;
}

message DeleteUserResponse {
  bool success = 1;
  string message = 2;
}

message UpdateUserVerificationStatusRequest {
  string user_id = 1;
  bool is_verified = 2;
}

message UpdateUserVerificationStatusResponse {
  bool success = 1;
  string message = 2;
}

message LoginUserRequest {
  string email = 1;
  string password = 2;
}

message LoginUserResponse {
  User user = 1; 
}

message GetUserByEmailRequest {
  string email = 1;
}

message GetUserByEmailResponse {
  User user = 1;
}

message GetUserByUsernameRequest {
  string username = 1;
}

message GetUserByUsernameResponse {
  User user = 1;
}

message IsUserBlockedRequest {
  string user_id = 1;    
  string blocked_by_id = 2; 
}

message IsUserBlockedResponse {
  bool is_blocked = 1;
}

message BlockUserRequest {
  string user_id = 1;    
  string blocked_by_id = 2; 
}

message BlockUserResponse {
  bool success = 1;
  string message = 2;
}

message UnblockUserRequest {
  string user_id = 1;    
  string unblocked_by_id = 2; 
}

message UnblockUserResponse {
  bool success = 1;
  string message = 2;
}

message ReportUserRequest {
  string user_id = 1;    
  string reported_by_id = 2; 
  string reason = 3;     
}

message ReportUserResponse {
  bool success = 1;
  string message = 2;
}

message IsFollowingRequest {
  string follower_id = 1;
  string followed_id = 2;
}

message IsFollowingResponse {
  bool is_following = 1;
}

message FollowUserRequest {
  string follower_id = 1; 
  string followed_id = 2; 
}

message FollowUserResponse {
  bool success = 1;
  string message = 2;
  bool was_already_following = 3;
  bool is_now_following = 4;
}

message UnfollowUserRequest {
  string follower_id = 1; 
  string followed_id = 2; 
}

message UnfollowUserResponse {
  bool success = 1;
  string message = 2;
  bool was_following = 3;
  bool is_now_following = 4;
}

message GetFollowersRequest {
  string user_id = 1; 
  int32 page = 2;     
  int32 limit = 3;    
}

message GetFollowersResponse {
  repeated User followers = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message GetFollowingRequest {
  string user_id = 1; 
  int32 page = 2;     
  int32 limit = 3;    
}

message GetFollowingResponse {
  repeated User following = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message SearchUsersRequest {
  string query = 1;  
  int32 page = 2;    
  int32 limit = 3;   
}

message SearchUsersResponse {
  repeated User users = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message GetRecommendedUsersRequest {
  int32 limit = 1; 
}

message GetRecommendedUsersResponse {
  repeated User users = 1;
}

message RequestPasswordResetRequest {
  string email = 1;
}

message RequestPasswordResetResponse {
  bool success = 1;
  string message = 2;
}

message VerifyResetTokenRequest {
  string token = 1;
  string email = 2;
}

message VerifyResetTokenResponse {
  bool valid = 1;
  string message = 2;
  string user_id = 3;
}

message VerifySecurityAnswerRequest {
  string email = 1;
  string answer = 2;
}

message VerifySecurityAnswerResponse {
  bool valid = 1;
  string message = 2;
  string token = 3;
}

message ResetPasswordRequest {
  string token = 1;
  string email = 2;
  string new_password = 3;
}

message ResetPasswordResponse {
  bool success = 1;
  string message = 2;
}

message GetAllUsersRequest {
  int32 page = 1;
  int32 limit = 2;
  string sort_by = 3;
  bool sort_desc = 4;
}

message GetAllUsersResponse {
  repeated User users = 1;
  int32 total_count = 2;
  int32 page = 3;
}

message BanUserRequest {
  string user_id = 1;
  bool ban = 2; 
  string reason = 3;
  string admin_id = 4;
}

message BanUserResponse {
  bool success = 1;
  string message = 2;
}

message SendNewsletterRequest {
  string subject = 1;
  string content = 2;
  string admin_id = 3;
}

message SendNewsletterResponse {
  bool success = 1;
  string message = 2;
  int32 recipients_count = 3;
}

message CommunityRequest {
  string id = 1;
  string user_id = 2;
  string name = 3;
  string description = 4;
  string category_id = 5;
  string status = 6; 
  string created_at = 7;
  string updated_at = 8;
  User requester = 9; 
}

message GetCommunityRequestsRequest {
  int32 page = 1;
  int32 limit = 2;
  string status = 3; 
}

message GetCommunityRequestsResponse {
  repeated CommunityRequest requests = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message ProcessCommunityRequestRequest {
  string request_id = 1;
  bool approve = 2;
  string reason = 3;
  string admin_id = 4;
}

message ProcessCommunityRequestResponse {
  bool success = 1;
  string message = 2;
}

message PremiumRequest {
  string id = 1;
  string user_id = 2;
  string reason = 3;
  string status = 4; 
  string created_at = 5;
  string updated_at = 6;
  User requester = 7; 
}

message GetPremiumRequestsRequest {
  int32 page = 1;
  int32 limit = 2;
  string status = 3; 
}

message GetPremiumRequestsResponse {
  repeated PremiumRequest requests = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message ProcessPremiumRequestRequest {
  string request_id = 1;
  bool approve = 2;
  string reason = 3;
  string admin_id = 4;
}

message ProcessPremiumRequestResponse {
  bool success = 1;
  string message = 2;
}

message ReportRequest {
  string id = 1;
  string reporter_id = 2;
  string reported_user_id = 3;
  string reason = 4;
  string status = 5; 
  string created_at = 6;
  string updated_at = 7;
  User reporter = 8; 
  User reported_user = 9; 
}

message GetReportRequestsRequest {
  int32 page = 1;
  int32 limit = 2;
  string status = 3; 
}

message GetReportRequestsResponse {
  repeated ReportRequest requests = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message ProcessReportRequestRequest {
  string request_id = 1;
  bool approve = 2;
  string reason = 3;
  string admin_id = 4;
}

message ProcessReportRequestResponse {
  bool success = 1;
  string message = 2;
}

message ThreadCategory {
  string id = 1;
  string name = 2;
  string description = 3;
  string created_at = 4;
  string updated_at = 5;
}

message GetThreadCategoriesRequest {
  int32 page = 1;
  int32 limit = 2;
}

message GetThreadCategoriesResponse {
  repeated ThreadCategory categories = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message CreateThreadCategoryRequest {
  string name = 1;
  string description = 2;
  string admin_id = 3;
}

message CreateThreadCategoryResponse {
  ThreadCategory category = 1;
}

message UpdateThreadCategoryRequest {
  string id = 1;
  string name = 2;
  string description = 3;
  string admin_id = 4;
}

message UpdateThreadCategoryResponse {
  ThreadCategory category = 1;
}

message DeleteThreadCategoryRequest {
  string id = 1;
  string admin_id = 2;
}

message DeleteThreadCategoryResponse {
  bool success = 1;
  string message = 2;
}

message CommunityCategory {
  string id = 1;
  string name = 2;
  string description = 3;
  string created_at = 4;
  string updated_at = 5;
}

message GetCommunityCategoriesRequest {
  int32 page = 1;
  int32 limit = 2;
}

message GetCommunityCategoriesResponse {
  repeated CommunityCategory categories = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 limit = 4;
}

message CreateCommunityCategoryRequest {
  string name = 1;
  string description = 2;
  string admin_id = 3;
}

message CreateCommunityCategoryResponse {
  CommunityCategory category = 1;
}

message UpdateCommunityCategoryRequest {
  string id = 1;
  string name = 2;
  string description = 3;
  string admin_id = 4;
}

message UpdateCommunityCategoryResponse {
  CommunityCategory category = 1;
}

message DeleteCommunityCategoryRequest {
  string id = 1;
  string admin_id = 2;
}

message DeleteCommunityCategoryResponse {
  bool success = 1;
  string message = 2;
}

message CreateCommunityRequestRequest {
  string community_id = 1;
  string user_id = 2;
  string name = 3;
  string description = 4;
}

message CreateCommunityRequestResponse {
  bool success = 1;
  string message = 2;
  CommunityRequest request = 3;
}